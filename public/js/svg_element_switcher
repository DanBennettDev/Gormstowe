
addEventListener("load", loadLogo);

var onoffList = [];
var frameCount = 0;
var probability = 0.3;
var elementsOff = 0;

function loadLogo(){
	var delay = d3.xml("./img/text_viisit_frag_bak.svg").mimeType("image/svg+xml")
    .get(function(error, xml) {
       if (error) throw error;
       d3.select("#logo")
       .node()
       .appendChild(xml.documentElement);

       startAnim();
    });

    function startAnim(){
	    onoffList  = document.getElementsByClassName("onoff");

	    setInterval(step, 100);
	}

	function step(){
		if(Math.random()>probability){
			var elem = Math.floor(Math.random()*onoffList.length);
			if(onoffList[elem].style.visibility=="hidden"){
				elementsOff--;
				onoffList[elem].style.visibility = "visible";	
			} else {
				if(Math.random() < (probability/1.0) ){
					elementsOff++;
					onoffList[elem].style.visibility = "hidden";	
				}
			}
		}
	}



}


